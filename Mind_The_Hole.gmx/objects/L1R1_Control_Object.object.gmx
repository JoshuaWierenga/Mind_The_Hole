<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>first_text = 0;
second_text = 0;
third_text = 0;

contact = 0;

floorfinished = 0;
stage = 0;
cage_top = 0;
cage_sides = 0;

inside = false;
checkPos = true;

alarm[0] = 15;
alarm[1] = 45;
alarm[2] = 75;
alarm[3] = 300;
alarm[4] = 600;
alarm[5] = 710;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>stage = 3;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (Control_Object.playing)
{
    with (Player_Object)
    {
        hp -= 2;
        hurt = 1;
        alarm[0] = 30;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>third_text = 1;
floorfinished = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (Control_Object.playing)
{
    make_objects(128,-32,1, 1, 0, 0.3, Room_Exit_Texture, 0);
    
    with(Gravity_Collisions_Object)
    {
        if (object == 0)
        {
            image_xscale = 4;
        }
    }
    
    for (i = 96; i &lt;= 256; i+=32)
    {
        for (j = 0; j &lt;= 64; j+=32)
        {
            with (instance_position(i, j, Grass_Floor_Object))
            {
                use_gravity = 1;
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>second_text = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>first_text = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (Control_Object.playing)
{
    with (instance_position(800, 32, Grass_Floor_Object))
    {  
        use_gravity = 1;
    }
    with (instance_position(960, 64, Grass_Floor_Object))
    {
        use_gravity = 1;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (Control_Object.playing)
{
    with (instance_position(800, 64, Grass_Floor_Object))
    {
        use_gravity = 1;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (Control_Object.playing)
{
    if (contact == 0 &amp;&amp; Player_Object.y &gt;= 256)
    {
        contact = 1;
        alarm[6] = 10;
    }
    
    with(Gravity_Collisions_Object)
    {
        if (object == 0)
        {
            Gravity(Collisions_Object);
        }
    }
    
    if (Player_Object.x &gt;= 128 &amp;&amp; Player_Object.x &lt;= 256 &amp;&amp; Player_Object.y &gt;= 503  &amp;&amp; floorfinished &amp;&amp; stage == 0) 
    {
        stage = 1;
            
        for (i = 64; i &lt;= 288; i+=32)
        {        
            make_objects(i, -96, 0, 1, 0, 0.05, Dark_Blocks_Texture, 1);
        }
            
        for (i = -128; i &gt;= -576; i-=32)
        {
            make_objects(176, i, 0, 1, 0, 0.05, Dark_Blocks_Texture, 1);
        }
        
        for (i = 64; i &lt;= 288; i+=32)
        {
            for (j = 832; j &lt;= 1056; j+=32)
            {   
                if (i == 64 || i == 288) make_objects(i, j, 1, 1, 0, -0.05, Dark_Blocks_Texture, 2);
        
                if (j = 1056) make_objects(i, j, 1, 1, 0, -0.05, Dark_Blocks_Texture, 2);
            }
        }
    }
    
    else if (stage == 1)
    {
        //if cage stage 0 means nothing is done 1 means top is finished and 2 and 3 are for each of the sides
                
        //If top is not finished
        if (cage_top == 0)
        {
            //Check if top is hitting grass and if so remove the grass
            with(Grass_Floor_Object)
            { 
                if (instance_position(x, y-2, Gravity_NoCollisions_Object)) instance_destroy();
            }
                    
            //Check if top is at y = 448 and if so delete it and replace with objects that have collisions
            //and no gravity
            with(Gravity_NoCollisions_Object)
            {
                if (object == 1 &amp;&amp; x == 64 &amp;&amp; y &gt;= 448)
                {           
                    L1R1_Control_Object.cage_top++;
                    with(Gravity_NoCollisions_Object)
                    {
                        if (object == 1)
                        {
                            make_objects(x, y-5, 1, 0, waitforcontact, grav, sprite_index, object);
                            instance_destroy();
                        }
                    }
                }
            }
        }
        
        if (cage_sides == 0)
        {        
            //Check if sides are hitting the ground and if so make the ground move with the sides
            with(Floating_Blocks_Object)
            {
                if (x == 64 &amp;&amp; y = 704 &amp;&amp; instance_position(x, y+32, Gravity_Collisions_Object))
                {
                    L1R1_Control_Object.cage_sides++;
                    use_gravity = 1;
                    grav = -0.05;
                    with(instance_place(x, y-2, Floating_Blocks_Object))
                    {
                        use_gravity = 1;
                        grav = -0.05;
                    }
                    with(instance_place(x+224, y, Floating_Blocks_Object))
                    {
                        use_gravity = 1;
                        grav = -0.05;
                    }
                    with(instance_place(x+224, y-2, Floating_Blocks_Object))
                    {
                        use_gravity = 1;
                        grav = -0.05;
                    }
                }
            }
        }
        
        if (cage_top &amp;&amp; cage_sides)
        {
            stage = 2;
            alarm[7] = 120;
        }   
    }
    
    else if (stage == 3)
    {
        if (checkPos)
        {
            checkPos = false;
            if (Player_Object.x &gt;= 128 &amp;&amp; Player_Object.x &lt;= 256 &amp;&amp; Player_Object.y &gt;= 503)
            {
                inside = true;
                checkPos = false;
            }
            else
            {
               inside = false;
            }
        }
        else
        {
            with(Gravity_Collisions_Object)
            {
                make_objects(x, y, 0, 1, 0, 0.05, sprite_index, object);
                instance_destroy();
            }
            with(Floating_Blocks_Object)
            {
                if (use_gravity == 1)
                {
                    make_objects(x, y, 0, 1, 0, 0.05, sprite_index, 3);
                    instance_destroy();
                }
            } 
            
            with(Floating_Blocks_Object)
            {
                for(i = 96; i &lt;= 256;  i+=32)
                {
                    for(j = 672; j &lt;= 704; j+=32)
                    {
                        if (x == i and y == j)
                        {
                            make_objects(x, y, 0, 1, 0, 0.05, sprite_index, 4);
                            instance_destroy();
                        }
                    }
                }
            }
            stage = 4;
        }
    }
}  
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (Control_Object.draw_gui)
{
    if (first_text) draw_text(736, 448, "NOW LOOK AT WHAT YOU HAVE DONE!!");
    if (second_text) draw_text(384, 448, "There is no way out of here! ");
    if (third_text) draw_text(136, 544, "NOOOOOOOOO!");
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
